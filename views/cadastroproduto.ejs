<%- include('partials/header') %>

<style>
  .row {
    max-width: 99%;
    margin-left: 0.5%
  }

  #titulo {
    text-align: center;
  }

  .validadeInput {
    width: 222px;
    height: 58px;
  }

  #validadeDescritivo {
    font-size: 14px;
    padding-top: 0;
    padding-left: 2px;
  }

  .validadeDiv {
    border-color: gray;
    background-clip: padding-box;
    opacity: .50;
  }

  .file {
  opacity: 0;
  width: 0.1px;
  height: 0.1px;
  position: absolute;
}

.file-input label {
  display: block;
  position: relative;
  width: 200px;
  height: 50px;
  border-radius: 5px;
  background: #22577A;
  box-shadow: 0 4px 7px rgba(0, 0, 0, 0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  color: #fff;
  font-weight: bold;
  cursor: pointer;
  transition: transform .2s ease-out;
}

.file-name {
  position: absolute;
  bottom: -35px;
  left: 10px;
  font-size: 0.85rem;
  color: #555;
}

.button-8 {
  width: 100px;
  background-color: #e1ecf4;
  border-radius: 3px;
  border: 1px solid #7aa7c7;
  box-shadow: rgba(255, 255, 255, .7) 0 1px 0 0 inset;
  box-sizing: border-box;
  color: #39739d;
  cursor: pointer;
  display: inline-block;
  font-family: -apple-system,system-ui,"Segoe UI","Liberation Sans",sans-serif;
  font-size: 13px;
  font-weight: 400;
  line-height: 1.15385;
  margin: 0;
  outline: none;
  padding: 8px .8em;
  position: relative;
  text-align: center;
  text-decoration: none;
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  vertical-align: baseline;
  white-space: nowrap;
}

.button-8:hover,
.button-8:focus {
  background-color: #b3d3ea;
  color: #2c5777;
}

.button-8:focus {
  box-shadow: 0 0 0 4px rgba(0, 149, 255, .15);
}

.button-8:active {
  background-color: #a0c7e4;
  box-shadow: none;
  color: #2c5777;
}
</style>

<form action="/cadastroproduto" method="post" enctype="multipart/form-data" onsubmit="return validate(this);">
    <div class="row" id='descritivoCadastro' style="margin-left: none;">
      <div class="col-lg-12 mt-2" id='titulo'>
        <h3 class='descritivoCadastro'>Cadastro de Produto</h3>
      </div>
    </div>
      <div class="row mb-2">
        <div class="col-lg-12">
          <button type="button" class="button-8" style="margin-right: 1%;" data-bs-dismiss="modal" onclick="mostraBasico()">Básico</button>
          <button type="button" class="button-8" style="margin-right: 1%;" data-bs-dismiss="modal" onclick="mostraFinanceiro()">Financeiro</button>
        </div>
      </div>
      <!-- Aqui entra os botões do básico -->
    <div class="row basico">
      <div class="col-lg">
        <div class="form-floating">
          <input class="form-control" id="nameInput" name='nome'>
          <label for="descricaoInput">Nome:</label>
        </div>
      </div>
    </div>
    <div class="row mt-2 basico" id='rowTerceira'>
      <div class="col-lg">
        <div class="form-floating">
          <input class="form-control" id="descricaoInput" name='descri'>
          <label for="descricaoInput">Descrição:</label>
        </div>
      </div>
    </div>
    <div class="row mt-2 basico">
      <div class="col-lg">
        <div class="form-floating">
          <input class="form-control" id="codigoInput" name='codigo'>
          <label for="codigoInput">Código:</label>
        </div>
      </div>
      <div class="col-lg">
        <div class="form-floating">
          <select class="form-select" id="tipoSelect" aria-label="Floating label" name="tipo">
            <option class='valor'></option>
            <option class='valor'>PL</option>
            <option class='valor'>MP</option>
            <option class='valor'>SV</option>
            <option class='valor'>MC</option>
          </select>
          <label for="tipoSelect">Tipo:</label>
        </div>
      </div>
      <div class="col-lg">
        <div class="form-floating">
          <select class="form-select" id="grupoSelect" aria-label="Floating label" name="grupo">
            <option class='valor'></option>
            <option class='valor' value="0001">Resinas plásticas / Pigmentos</option>
            <option class='valor' value="0002">Borrachas</option>
            <option class='valor' value="0003">Chapas / Barras / Perfis</option>
          </select>
          <label for="grupoSelect">Grupo:</label>
        </div>
      </div>
      <div class="col-lg">
        <div class="form-floating">
          <input class="form-control" id="ncmInput" type="number" name='ncm'>
          <label for="ncmInput">NCM:</label>
        </div>
      </div>
      <div class="col-lg">
        <div class="form-floating">
          <input class="form-control" id="gtinInput" type="number" name='gtin'>
          <label for="ncmInput">GTIN:</label>
        </div>
      </div>
    </div>
    <div class="row mt-2 basico">
      <div class="col-lg">
        <div class="form-floating">
          <input class="form-control" id="unInput" type="text" name='un' required>
          <label for="ncmInput">UN:</label>
        </div>
      </div>
      <div class="col-lg">
        <div class="form-floating">
          <input class="form-control" id="utilizacaoInput" type="text" name='utilizacao'>
          <label for="ncmInput">Utilização:</label>
        </div>
      </div>
      <div class="col-lg">
        <div class="form-floating">
          <input class="form-control" id="familiaInput" type="text" name='familia'>
          <label for="ncmInput">Família:</label>
        </div>
      </div>
      <div class="col-lg">
        <div class="form-floating">
          <input class="form-control" id="origemInput" type="text" name='origem'>
          <label for="ncmInput">Origem:</label>
        </div>
      </div>
    </div>
    <!-- Aqui entra os botões do financeiro -->
    <div class="row mt-2 financeiro">
      <div class="col-lg">
        <div class="form-floating">
          <input class="form-control" id="unInput" type="text" name='un' required>
          <label for="ncmInput">UN:</label>
        </div>
      </div>
      <div class="col-lg">
        <div class="form-floating">
          <input class="form-control" id="utilizacaoInput" type="text" name='utilizacao'>
          <label for="ncmInput">Utilização:</label>
        </div>
      </div>
      <div class="col-lg">
        <div class="form-floating">
          <input class="form-control" id="familiaInput" type="text" name='familia'>
          <label for="ncmInput">Família:</label>
        </div>
      </div>
      <div class="col-lg">
        <div class="form-floating">
          <input class="form-control" id="origemInput" type="text" name='origem'>
          <label for="ncmInput">Origem:</label>
        </div>
      </div>
    </div>
  </div>
  <div class="file-input mt-3" style="margin-left: 1.5%;">
    <input type="file" id="file" class="file" name="postImage">
    <label for="file">
      Escolher Anexo
      <p class="file-name" style="width: 500px;"></p>
    </label>
  </div>
  <button type="submit" id='botaoSalva' class="btn btn-success mt-3" style='margin-left: 46.5%;'>Cadastrar</button>
</form>

<script>
  for(i = 0; i < document.getElementsByClassName('financeiro').length; i++){
    document.getElementsByClassName('financeiro')[i].style.display = 'none'
  }

function mostraBasico(){
  for(i = 0; i < document.getElementsByClassName('basico').length; i++){
    document.getElementsByClassName('basico')[i].style.display = 'flex'
  }
  for(i = 0; i < document.getElementsByClassName('financeiro').length; i++){
    document.getElementsByClassName('financeiro')[i].style.display = 'none'
  }
}

function mostraFinanceiro(){
  for(i = 0; i < document.getElementsByClassName('financeiro').length; i++){
    document.getElementsByClassName('financeiro')[i].style.display = 'flex'
  }
  for(i = 0; i < document.getElementsByClassName('basico').length; i++){
    document.getElementsByClassName('basico')[i].style.display = 'none'
  }
}

  const file = document.querySelector('#file');
  file.addEventListener('change', (e) => {
    // Get the selected file
    const [file] = e.target.files;
    // Get the file name and size
    const { name: fileName, size } = file;
    // Convert size in bytes to kilo bytes
    const fileSize = (size / 1000).toFixed(2);
    // Set the text content
    const fileNameAndSize = `${fileName} - ${fileSize}KB`;
    document.querySelector('.file-name').textContent = fileNameAndSize;
  });

  function validate(form) {


    if (document.getElementsByName('nome')[0].value == '') {
      alert('O campo "nome" não pode ser vazio');
      return false;
    } else if(document.getElementsByName('codigo')[0].value == ''){
      alert('O campo "código" não pode ser vazio');
      return false;
    }
     else {
      return confirm('Você realmente quer cadastrar esse produto?')
      const file = document.querySelector('#file');
      file.addEventListener('change', (e) => {
        // Get the selected file
        const [file] = e.target.files;
        // Get the file name and size
        const { name: fileName, size } = file;
        // Convert size in bytes to kilo bytes
        const fileSize = (size / 1000).toFixed(2);
        // Set the text content
        const fileNameAndSize = `${fileName} - ${fileSize}KB`;
        document.querySelector('.file-name').textContent = fileNameAndSize;
      });;
    }
  }

</script>


<%- include('partials/footer') %>
