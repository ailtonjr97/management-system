<%- include('partials/header') %>

<style>
  #rowMestra {
    max-width: 99%;
    margin-left: 1%
  }

  #titulo {
    text-align: center;
  }

  .validadeInput {
    width: 222px;
    height: 58px;
  }

  #validadeDescritivo {
    font-size: 14px;
    padding-top: 0;
    padding-left: 2px;
  }

  .validadeDiv {
    border-color: gray;
    background-clip: padding-box;
    opacity: .50;
  }

  .file {
  opacity: 0;
  width: 0.1px;
  height: 0.1px;
  position: absolute;
}

.file-input label {
  display: block;
  position: relative;
  width: 200px;
  height: 50px;
  border-radius: 5px;
  background: #22577A;
  box-shadow: 0 4px 7px rgba(0, 0, 0, 0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  color: #fff;
  font-weight: bold;
  cursor: pointer;
  transition: transform .2s ease-out;
}

.file-name {
  position: absolute;
  bottom: -35px;
  left: 10px;
  font-size: 0.85rem;
  color: #555;
}
</style>

<form action="/cadastroproduto" method="post" enctype="multipart/form-data" onsubmit="return validate(this);">
  <div class="row" id='rowMestra'>
    <div class="row" id='descritivoCadastro'>
      <div class="col-lg-12 mt-2" id='titulo'>
        <h3 class='descritivoCadastro'>Cadastro de Produto</h3>
      </div>
    </div>
    <div class="row" id='rowTerceira'>
      <div class="col-lg">
        <div class="form-floating">
          <input class="form-control" id="nameInput" name='nome'>
          <label for="descricaoInput">Nome:</label>
        </div>
      </div>
    </div>
    <div class="row mt-2" id='rowTerceira'>
      <div class="col-lg">
        <div class="form-floating">
          <input class="form-control" id="descricaoInput" name='descri'>
          <label for="descricaoInput">Descrição:</label>
        </div>
      </div>
    </div>
    <div class="row mt-2">
      <div class="col-lg">
        <div class="form-floating">
          <input class="form-control" id="codigoInput" name='codigo'>
          <label for="codigoInput">Código:</label>
        </div>
      </div>
      <div class="col-lg">
        <div class="form-floating">
          <input class="form-control" id="ncmInput" type="number" name='ncm'>
          <label for="ncmInput">NCM:</label>
        </div>
      </div>
      <div class="col-lg">
        <div class="form-floating">
          <input class="form-control" id="gtinInput" type="number" name='gtin'>
          <label for="ncmInput">GTIN:</label>
        </div>
      </div>
      <div class="col-lg">
        <div class="form-floating">
          <select class="form-select" id="classificacaoSelect" aria-label="Floating label" name="categoria">
            <option class='valor'></option>
            <option class='valor'>Categoria 1</option>
            <option class='valor'>Categoria 2</option>
          </select>
          <label for="classificacaoSelect">Categoria:</label>
        </div>
      </div>
    </div>
    <div class="row mt-2">
      <div class="col-lg">
        <div class="form-floating">
          <input class="form-control" id="unInput" type="text" name='un' required>
          <label for="ncmInput">UN:</label>
        </div>
      </div>
      <div class="col-lg">
        <div class="form-floating">
          <input class="form-control" id="utilizacaoInput" type="text" name='utilizacao'>
          <label for="ncmInput">Utilização:</label>
        </div>
      </div>
      <div class="col-lg">
        <div class="form-floating">
          <input class="form-control" id="familiaInput" type="text" name='familia'>
          <label for="ncmInput">Família:</label>
        </div>
      </div>
      <div class="col-lg">
        <div class="form-floating">
          <input class="form-control" id="origemInput" type="text" name='origem'>
          <label for="ncmInput">Origem:</label>
        </div>
      </div>
    </div>
  </div>
  <div class="file-input mt-3" style="margin-left: 2%;">
    <input type="file" id="file" class="file" name="postImage">
    <label for="file">
      Escolher Anexo
      <p class="file-name" style="width: 500px;"></p>
    </label>
  </div>
  <button type="submit" id='botaoSalva' class="btn btn-success mt-3" style='margin-left: 46.5%;'>Cadastrar</button>
</form>

<script>
  const file = document.querySelector('#file');
  file.addEventListener('change', (e) => {
    // Get the selected file
    const [file] = e.target.files;
    // Get the file name and size
    const { name: fileName, size } = file;
    // Convert size in bytes to kilo bytes
    const fileSize = (size / 1000).toFixed(2);
    // Set the text content
    const fileNameAndSize = `${fileName} - ${fileSize}KB`;
    document.querySelector('.file-name').textContent = fileNameAndSize;
  });

  function validate(form) {


    if (document.getElementsByName('descri')[0].value == '') {
      alert('O campo descrição não pode ser vazio');
      return false;
    } else {
      return confirm('Você realmente quer cadastrar esse produto?')
      const file = document.querySelector('#file');
      file.addEventListener('change', (e) => {
        // Get the selected file
        const [file] = e.target.files;
        // Get the file name and size
        const { name: fileName, size } = file;
        // Convert size in bytes to kilo bytes
        const fileSize = (size / 1000).toFixed(2);
        // Set the text content
        const fileNameAndSize = `${fileName} - ${fileSize}KB`;
        document.querySelector('.file-name').textContent = fileNameAndSize;
      });;
    }
  }

</script>


<%- include('partials/footer') %>
